---
description: SpeedBitCrack strict FINAL-STAGE core rules for Pollard's rho/kangaroo ECDLP solver (secp256k1, Rust + hybrid GPU). Locked Feb 2026.
alwaysApply: true
---

# SpeedBitCrack â€” .cursor Rules

## (FINAL HARDENING & VALIDATION LOCK â€“ February 2026 Edition)

You are operating on **SpeedBitCrack**, a near-complete, high-performance, multi-target Pollard's rho/kangaroo ECDLP solver for secp256k1 using a hybrid GPU architecture (Vulkan/wgpu bulk + CUDA precision).

This project is in **end-stage implementation, drift elimination, regression hardening, performance certification, and stability validation**.

This is NOT early development.
This is NOT architecture design.
This is NOT experimental optimization.

This is **production-grade cryptographic engine finalization**.

These rules are STRICT and override all defaults.

# Project Overview

* Multi-target Pollardâ€™s rho/kangaroo ECDLP solver
* secp256k1
* Rust 2021
* Hybrid GPU backend:

  * Vulkan/wgpu for bulk compute
  * CUDA for precision math
* Target hardware: RTX 5090 class GPUs
* Goal: 2.5â€“3B ops/sec sustained
* Targets:

  * Early unspent P2PK outputs (blocks 1â€“500k, >1 BTC)
  * Bitcoin puzzles

# DEVELOPMENT PHASE â€” LOCKED STATE

The architecture is complete.

From this point forward:

âŒ No architectural redesign
âŒ No file tree restructuring
âŒ No algorithm swaps
âŒ No mathematical model changes
âŒ No randomness introduction
âŒ No speculative improvements

Only:

* Hardening
* Profiling
* Bug fixing
* Drift elimination
* Stability enforcement
* Performance tuning (within allowed zones)

# Core Development Philosophy (Final Stage)

* Determinism over convenience
* Parity before speed
* Real puzzles only
* Full targets always
* Zero drift tolerated
* Hybrid backend sacred
* Every change regression-tested
* Build cleanliness mandatory

# Dependencies & Standards (Locked)

Required Crates:

* wgpu = "0.20"
* k256 = "0.13"
* rayon = "1.10"
* tokio = { version = "1", features = ["full"] }
* clap = { version = "4", features = ["derive"] }
* cuckoofilter = "0.5"
* log = "0.4"
* env_logger = "0.11"
* anyhow = "1.0"
* hex = "0.4"
* serde = { version = "1", features = ["derive"] }

Rust Standards:

* Edition = 2021
* Minimum rust-version = 1.80
* Clippy pedantic + nursery
* No unwrap/panic in hot paths
* #![deny(unsafe_code)] except explicit CUDA interop


# ğŸš¨ ABSOLUTE BUILD GATE (NON-NEGOTIABLE)

Before ANY git commit:

cargo clean
cargo build --release
cargo clippy --all-targets --all-features -- -D warnings
cargo test --release

ALL must succeed.

Requirements:

* Zero compile errors
* Zero warnings
* No denied lints
* No unused imports
* No dead code unless justified
* No feature-flag breakage
* No shader compile errors
* No CUDA compile failures
* No build.rs failure

If ANY fail:

âŒ No commit
âŒ No summary
âŒ No continuation

Build cleanliness is equal severity to parity correctness.

# Strict File Structure & Responsibilities (Frozen)

Project Root:
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ build.rs
â”œâ”€â”€ speedbitcrack-core.mdc
â”œâ”€â”€ valuable_p2pk_pubkeys.txt
â”œâ”€â”€ puzzles.txt
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs                 # Thin entry point only (no logic growth allowed)
â”‚   â”œâ”€â”€ lib.rs
â”‚   â”œâ”€â”€ config.rs
â”‚   â”œâ”€â”€ types.rs
â”‚   â”œâ”€â”€ security.rs
â”‚   â”œâ”€â”€ puzzles.rs
â”‚   â”œâ”€â”€ math/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ secp.rs              # Barrett + Montgomery hybrid ONLY
â”‚   â”‚   â”œâ”€â”€ bigint.rs
â”‚   â”‚   â”œâ”€â”€ constants.rs
â”‚   â”‚   â””â”€â”€ tests.rs
â”‚   â”œâ”€â”€ kangaroo/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ manager.rs
â”‚   â”‚   â”œâ”€â”€ generator.rs         # Deterministic wild/tame logic
â”‚   â”‚   â”œâ”€â”€ stepper.rs
â”‚   â”‚   â”œâ”€â”€ collision.rs
â”‚   â”‚   â”œâ”€â”€ controller.rs
â”‚   â”‚   â”œâ”€â”€ config.rs
â”‚   â”‚   â”œâ”€â”€ search_config.rs
â”‚   â”‚   â””â”€â”€ tests.rs
â”‚   â”œâ”€â”€ gpu/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ backend.rs
â”‚   â”‚   â”œâ”€â”€ hybrid_manager.rs
â”‚   â”‚   â”œâ”€â”€ shared.rs
â”‚   â”‚   â”œâ”€â”€ backends/
â”‚   â”‚   â”‚   â”œâ”€â”€ backend_trait.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ cpu_backend.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ cuda_backend.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ hybrid_backend.rs
â”‚   â”‚   â”‚   â””â”€â”€ vulkan_backend.rs
â”‚   â”‚   â”œâ”€â”€ vulkan/
â”‚   â”‚   â”‚   â”œâ”€â”€ pipeline.rs
â”‚   â”‚   â”‚   â””â”€â”€ shaders/
â”‚   â”‚   â”‚       â”œâ”€â”€ kangaroo.wgsl
â”‚   â”‚   â”‚       â”œâ”€â”€ jump_table.wgsl
â”‚   â”‚   â”‚       â”œâ”€â”€ dp_check.wgsl
â”‚   â”‚   â”‚       â””â”€â”€ utils.wgsl
â”‚   â”‚   â””â”€â”€ cuda/
â”‚   â”‚       â”œâ”€â”€ solve.cu
â”‚   â”‚       â”œâ”€â”€ inverse.cu
â”‚   â”‚       â”œâ”€â”€ rho_kernel.cu
â”‚   â”‚       â””â”€â”€ [other locked CUDA kernels]
â”‚   â”œâ”€â”€ dp/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ table.rs
â”‚   â”‚   â””â”€â”€ pruning.rs
â”‚   â”œâ”€â”€ parity/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ checker.rs
â”‚   â”œâ”€â”€ targets/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ loader.rs
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ logging.rs
â”‚   â”‚   â”œâ”€â”€ hash.rs
â”‚   â”‚   â”œâ”€â”€ bias.rs
â”‚   â”‚   â””â”€â”€ output.rs
â”‚   â”œâ”€â”€ test_basic.rs
â”‚   â””â”€â”€ simple_test.rs
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ bias_validation.rs
â”‚   â”œâ”€â”€ config.rs
â”‚   â”œâ”€â”€ fuzz_targets.rs
â”‚   â”œâ”€â”€ kangaroo.rs
â”‚   â”œâ”€â”€ magic9.rs
â”‚   â”œâ”€â”€ math.rs
â”‚   â””â”€â”€ puzzle.rs
â”œâ”€â”€ benches/
â”œâ”€â”€ docs/
â”œâ”€â”€ profiling_output/
â””â”€â”€ scripts/

No structural changes permitted without explicit discussion.

# Core Must-Haves (Unchangeable)

## Targets

* Always load full 34,353 P2PK pubkeys
* No shrinking unless --test-mode

## Wild Starts

* Original prime spacing only
* Deterministic
* No entropy

## Tame Starts

* From G
* Deterministic
* G-Link preserved

## Modular Arithmetic

* Barrett + Montgomery hybrid only

## DP Logic

* Trailing dp-bits mask
* No skipping
* No probabilistic shortcuts

## Jump Table

* 8 deterministic ops
* No runtime randomness

## Backend

HYBRID MODE IS SACRED:

Vulkan â†’ bulk stepping
CUDA â†’ precision EC + solving

# REGRESSION PROTOCOL (MANDATORY AFTER ANY CHANGE)

1. 10M-step CPU/GPU parity
2. Validate puzzles #64, #65, #66
3. DP rate unchanged
4. No drift
5. Log ops/sec delta

Any mismatch â†’ revert.

# PERFORMANCE OPTIMIZATION ZONES (ALLOWED)

* Warp divergence reduction
* Shared memory tuning
* Kernel occupancy tuning
* Memory coalescing
* Async overlap
* Register pressure reduction

Forbidden:

* Math changes
* DP logic changes
* Jump logic changes
* Prime spacing changes
* Collision math changes

# STABILITY CERTIFICATION

Before release:

* 72-hour run
* No memory leaks
* No drift
* No GPU context loss
* No DP corruption

# GIT PROTOCOL (MANDATORY)

After successful build + tests:

git add .
git commit -m "Session YYYY-MM-DD: [Change Type] - Description - Validation performed"

Must include:

* Change classification
* Validation steps run
* Performance delta if relevant

# CHANGE CLASSIFICATION

All changes must be labeled:

* PERF-TUNE
* BUGFIX
* DRIFT-FIX
* VALIDATION
* HARDENING
* LOGGING
* DOCUMENTATION

Unclear classification â†’ stop.

# PARITY IS LAW

If CPU â‰  GPU:

GPU is wrong until proven otherwise.

No tolerance for:

* Limb carry mismatch
* Reduction inconsistency
* Alpha/Beta overflow
* Negation symmetry break
* Off-by-one drift

# LOCKED STATE DECLARATION

SpeedBitCrack is in:

ğŸ”’ Final Hardening Mode
ğŸ”’ Architecture Frozen
ğŸ”’ Algorithm Frozen
ğŸ”’ Determinism Enforced
ğŸ”’ Release Build Cleanliness Mandatory

All deviations require explicit discussion and update to this file.
